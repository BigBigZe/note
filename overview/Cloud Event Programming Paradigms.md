## 1. introduction
myriad 无数

快速扩展分析

以及一些serverless不能很好支撑的应用

事件驱动的云平台架构和传统的软件架构有什么区别？

## 2. 相关工作
分析一下云服务的进化趋势

面向云的商业化模式加速了云服务相关技术的发展。

当前云服务技术主要的发展目标是朝着更抽象、更虚拟的方向发展，即对用户越来越轻量级，越来越透明。

## 3. 测试平台

基础设施透明
![image](https://note.youdao.com/yws/public/resource/246e70713c69f7165004e69520470a1b/xmlnote/12A0A7D56ED948D8B30318CF49C15CD9/16338)

用户通过与AWS服务进行交互得到响应，而function的服务可以调用AWS的其他服务，比如数据库、S3。

用户使用其他AWS服务的行为可以被记在一个JSON对象中传给function ，然后开发者只用为这些function编写处理相关事件的代码即可。

hypothesize 假设

通过允许lambda函数响应多种多样的事件运行，AWS的大型产品组合大大提高了云事件的实用性。从这个意义上说，导致云事件的不仅仅是轻量级虚拟化环境的固化，还有公共云提供商产品组合的多样化。

![image](https://note.youdao.com/yws/public/resource/246e70713c69f7165004e69520470a1b/xmlnote/3D4E841CDE1C460CAFEFC3404AA8257F/16359)

用户发送一个请求给Route 53(路由)，再由53发给API网关，API网关分析完请求后，给需要调用的function发送相应的JSON格式事件，接着相关function会通过API协同AWS其他服务完成这次请求响应。

一旦被调用的lambda函数处理了传入的请求，就会向API网关返回响应json。此响应通过API网关的转换管道的出站阶段进行，然后通过分配给API的CloudFront分发服务给最终用户。使用这种方法，可以为每个API方法编写独立的函数，并独立地调用。

lambda函数的持续开发有助于API网关和lambda中内置的版本控制功能。最后，企业级应用程序可能会看到相当大的成本节约，因为AWS在API网关使用上花费很小的成本，并且每个lambda函数调用的费用只有几美分。

 In basic terms 论文中用的简而言之
 
 总的来说，AWS Lambda提供了一个function的编程环境以及调用其他服务的API
 
 
 ## 4. 应用
 #### A. Blogging in Node.js: Ghost 
 与从裸机到虚拟机，或从虚拟机到容器的进步不同，云事件需要新的软件构建模式，并且与构建Web应用程序中使用的传统工具和框架不兼容。
 
 统的Web应用程序在启动时遵循一种熟悉的API构造模式，一旦Web服务器在侦听请求，就执行API。为了尽可能地简化这个过程，存在许多框架，大多数框架都涉及列出方法/路由组合并将它们链接到端点逻辑。
 
 lambdafy允许这些相互冲突的范例共存，并且由两部分组成，它们处理云事件过程的不同方面。第一个是无服务器框架插件，它在部署时构建API网关和lambda规范，并指定API网关如何处理lambda的输入和输出。第二个是node.js包，它充当Web应用程序的lambda事件处理程序，并在运行时在云事件和Web请求/响应之间进行转换。
 
 传统的应用要想部署到serverless上去，必须拆分成functions，然后通过API进行交互。问题在于API的格式是很繁琐的，大部分开发者都没兴趣搞清这些API的格式是怎么定义的。
 
 function中的参数跟传统的HTTP请求不一样。
 
 传统的Web应用程序将无法处理lambda调用，因为它缺少指定用于处理传入事件的函数。
 
 ghost是一个流行的开源博客平台，构建在node.js的express框架上。这个应用程序被用来测试lambday逻辑的功能，并测试了一个在aws lambda中托管的传统Web应用程序的性能。使用这样一个重量级的应用程序对于在开发过程中暴露lamdefy中的问题以及与其他部署方法（如vms）相比突出云事件的基本差异和局限性非常有用。
 #### B. 高性能的媒体管理平台
 Trek10着重于使用由支持AWS服务的特定解决方案支持的AWS API网关和AWS lambda。本节讨论由Trek10实现的实际业务用例。
 
 
 autonomy 自主权
 
 大型企业通常由多个内部实体组成，每个实体都具有一定的自主权。这些企业通常希望创建一个媒体管理服务（MMS），以统一媒体资产的上传、存储和分发。Trek10的解决方案目标是降低存储和管理成本，增加和简化企业实体之间共享媒体资产的过程。目前，Trek10的解决方案只处理图像资产。未来的工作是推广MMS解决方案，以解决视频资产和其他常见资产格式的问题。
 
 由于与传统架构相比具有潜在的可扩展性和节约成本的改进，MMS用例选择了基于“无服务器”云事件的方法。设计的MMS解决方案包括三个核心功能：资产上传、资产分配和资产操作。解决方案体系结构建立在AmazonAPI网关上，它将请求和响应路由到后端。后端包括用于事件计算的AWS lambda、用于对象存储的AWS Simple Storage Service（S3）、用于维护状态的AWS'NoSQL数据库dynamodb以及用于资产分发和低延迟资产交付的AWS CloudFront。
 
 解决方案资产上载从向与MMS关联的API网关端点发出请求开始，MMS将发送预签名的URL。然后，请求者通过签名的URL将资产直接上载到S3。这说明了传统架构和云事件驱动架构之间的关键区别。在传统的体系结构中，服务器接收上载，并可以处理由于接收上载而产生的任何后处理或元数据存储。当彩信的上传直接进入S3进行存储时，需要一个云事件来向一些处理代理发出要完成工作的信号。在这种情况下，在成功上载S3时，会向lambda函数发送一个事件，该函数具有足够的信息，以使该函数能够处理上载对象的元数据。然后，处理后的元数据存储在dynamodb中，以便以后查询和资产管理。
 
 使用lambda函数，Trek10的MMS解决方案可以以令人尴尬的并行方式调整数百幅图像的大小。这种方法导致单个图像重新调整大小所需的时间成本大致相同，而不需要管理队列/工作池的大量开销。这是由lambda扇出方法实现的。lambda扇出利用了基于实例的资源的概念。当请求调整资产集的大小时，“master”请求函数为资产集中的每个图像调用“worker”lambda函数。如前所述，可以将每个调整大小的操作视为一个独立的独立事件，具有自己的CPU、内存和网络资源。这种云事件扇出模式允许在降低开发和基础设施成本的同时执行结果。
 
 ## 5. 讨论和结果
 #### A. Blogging in Node.js: Ghost
 在lambda中执行的容器的短暂性为应用程序开发人员提供了许多新的挑战。最值得注意的是，部署到云事件服务的任何应用程序都需要频繁启动（按请求总数的顺序）。这与更传统的环境形成了鲜明的对比，在这种环境中，应用程序很少启动，而且只随着部署随应用程序总负载的增加而扩展。因此，在无服务器环境中，启动时间成为衡量应用程序性能的关键指标，但在传统应用程序中，这种延迟几乎没有优化的理由。对于ghost，每次应用程序启动时，它都必须构建其API路由并连接到数据层，但它也会执行许多检查，甚至在启动Web服务器之前考虑进行数据库迁移。此初始化管道是不必要的串联执行的，需要数百毫秒才能完成。当然，在传统部署的世界中，ghost的实现看起来非常明智，但是在云事件的世界中，启动时间是极其昂贵的。随着云事件等技术破坏了云编程模式，不可知其部署的应用程序应开始优化启动延迟。
 
 云事件短暂性还强制在代码和文件系统中完全无状态执行。对本地状态所做的任何更改将只在单个执行单元中短暂存在，应用程序甚至可能没有对其工作目录的写访问权。这将强制分离应用程序逻辑和数据层。此外，由于云事件的极端水平扩展能力，应用程序的数据层必须能够处理许多可能无法正常关闭的并发和短期连接。例如，在试验Ghost时，该应用程序使用AWS的RDS中的标准MySQL映像作为数据存储。但是，由于lambda容器在关闭时不发出警告，因此到RDS实例的连接被不正确地终止，并且由于RDS实例中的长时间默认连接超时而快速建立。很快，由于最大并发连接数，请求失败。在传统的部署中，这个问题永远不会存在，但是在这个云事件环境中，应用程序的部署在数据层中强制更改（连接超时值），以适应lambda的行为。
 
 #### B. High Performance Media Management System 
 
 基于无服务器云事件方法的核心组件包括将工作负载和操作推送到特定用途的服务。例如，上传资产并不容易被API网关和lambda单独处理。相反，上传媒体资产是通过一个AWS S3预先签名的URL直接处理的。AWS lambda和API网关允许应用程序进程特定服务（如S3、dynamodb和cloudfront）的联合。这种关注分离是云事件范式的一个主要好处。
 
 所讨论的解决方案体系结构已全部实现，以及使用无服务器框架的资产生命周期管理的附加功能。如图3所示，该体系结构支持每秒约525个请求，而没有任何性能下降的迹象。图4比较了缓存命中和未命中的延迟。对于非缓存结果，对于任意大小的集，图像大小调整请求的响应延迟平均为600 700毫秒，从请求时开始，直到重新调整资产大小并分派资产URL。在缓存命中时，大约82.5%的请求在10毫秒内完成。这种性能的实现不需要考虑或管理扩展、系统资源约束、排队、集群管理以及许多进一步的配置和操作任务。采用的方法使整个核心系统能够在两个月内由两名工程师兼职构建，而这些工程师则承担了几个不相关的业务职责。
 
 ![image](https://note.youdao.com/yws/public/resource/246e70713c69f7165004e69520470a1b/xmlnote/10CA8E1ADC0D4BA798DA70F240252C46/16447)
 
 